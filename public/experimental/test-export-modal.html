<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Export Modal - WebXRide Enhanced Hotspot Editor</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f0f0f0;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 6px;
            cursor: pointer;
            margin: 10px;
            font-size: 16px;
            font-weight: bold;
        }
        .test-button:hover {
            background: #45a049;
        }
        .info-box {
            background: #e7f3ff;
            border: 1px solid #b3d9ff;
            border-radius: 6px;
            padding: 15px;
            margin: 20px 0;
        }
        .code-block {
            background: #f5f5f5;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 10px;
            font-family: monospace;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ðŸ§ª Test Export Modal</h1>
        <p>This page tests the enhanced export modal functionality of the WebXRide Enhanced Hotspot Editor.</p>
        
        <div class="info-box">
            <h3>What's New:</h3>
            <ul>
                <li>âœ… Enhanced export modal with input fields for template name and description</li>
                <li>âœ… "Save to WebXRide" button with comprehensive data collection</li>
                <li>âœ… Improved user experience with pre-filled form fields</li>
                <li>âœ… Enhanced metadata collection for better WebXRide integration</li>
                <li>âœ… Better visual feedback and success messages</li>
            </ul>
        </div>

        <h2>Test the Export Modal</h2>
        <p>Click the button below to test the enhanced export modal:</p>
        
        <button class="test-button" onclick="testExportModal()">ðŸš€ Test Export Modal</button>
        
        <div class="info-box">
            <h3>Expected Behavior:</h3>
            <ol>
                <li>Modal opens with input fields for template name and description</li>
                <li>Fields are pre-filled with default values</li>
                <li>Clicking "Save to WebXRide" collects the input data</li>
                <li>Data is passed to the save method with enhanced metadata</li>
                <li>Success message shows comprehensive template details</li>
            </ol>
        </div>

        <h2>Data Structure Sent to WebXRide</h2>
        <div class="code-block">
{
  "name": "Template Name from input",
  "description": "Description from textarea",
  "html": "Generated HTML content",
  "js": "Generated JavaScript content", 
  "css": "Generated CSS content",
  "tourData": {
    "scenes": {...},
    "totalHotspots": 0,
    "version": "webxride-enhanced"
  },
  "metadata": {
    "type": "360-hotspot-tour",
    "created": "2024-01-01T00:00:00.000Z",
    "author": "WebXRide Enhanced Hotspot Editor",
    "sceneCount": 1,
    "hasAudio": false,
    "hasNavigation": false,
    "startingPoint": {...}
  }
}
        </div>

        <h2>Integration Details</h2>
        <p>The enhanced export modal now:</p>
        <ul>
            <li><strong>Collects user input</strong> for template name and description</li>
            <li><strong>Validates input</strong> and provides fallback defaults</li>
            <li><strong>Enhances metadata</strong> with comprehensive tour information</li>
            <li><strong>Improves UX</strong> with better visual design and feedback</li>
            <li><strong>Maintains compatibility</strong> with existing WebXRide integration</li>
        </ul>
    </div>

    <script>
        function testExportModal() {
            // Create a mock HotspotEditor instance to test the export modal
            const mockEditor = {
                isWebXRideMode: true,
                webxrideContext: { mode: 'webxride' },
                scenes: {
                    room1: {
                        name: "Room 1",
                        image: "./images/room1.jpg",
                        hotspots: [],
                        startingPoint: null
                    }
                },
                currentScene: "room1",
                hotspots: [],
                pendingWebXRideExport: null,
                
                // Mock methods
                ensureWebXRideMode() { return true; },
                generateCompleteHTML(name) { return `<!-- Generated HTML for ${name} -->`; },
                generateCompleteJS() { return `// Generated JavaScript`; },
                generateCSS() { return `/* Generated CSS */`; },
                
                showExportDialog() {
                    return new Promise((resolve) => {
                        const dialog = document.createElement("div");
                        dialog.style.cssText = `
                            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                            background: rgba(0,0,0,0.8); z-index: 10000; display: flex; 
                            align-items: center; justify-content: center; font-family: Arial;
                        `;

                        dialog.innerHTML = `
                            <div style="background: #2a2a2a; padding: 30px; border-radius: 10px; color: white; max-width: 600px;">
                                <h3 style="margin-top: 0; color: #4CAF50;">Export Options</h3>
                                <p>Choose how you want to save your hotspot project:</p>
                                
                                <div style="margin: 20px 0; padding: 20px; background: rgba(255, 107, 53, 0.1); border-radius: 8px; border: 1px solid rgba(255, 107, 53, 0.3);">
                                    <h4 style="margin-top: 0; color: #FF6B35;">ðŸš€ Save to WebXRide</h4>
                                    <p style="margin: 10px 0; font-size: 14px; color: #ccc;">Save directly to WebXRide editor with template details</p>
                                    
                                    <div style="margin: 15px 0;">
                                        <label style="display: block; margin-bottom: 5px; color: #fff;">Template Name:</label>
                                        <input type="text" id="webxride-name" value="360Â° Interactive Tour" 
                                               style="width: 100%; padding: 8px; border: 1px solid #555; border-radius: 4px; background: #333; color: white; font-size: 14px;">
                                    </div>
                                    
                                    <div style="margin: 15px 0;">
                                        <label style="display: block; margin-bottom: 5px; color: #fff;">Description:</label>
                                        <textarea id="webxride-description" 
                                                  style="width: 100%; padding: 8px; border: 1px solid #555; border-radius: 4px; background: #333; color: white; font-size: 14px; height: 60px; resize: vertical;">Interactive 360Â° tour with hotspots</textarea>
                                    </div>
                                    
                                    <button id="export-webxride" style="
                                        background: #FF6B35; color: white; border: none; padding: 15px 25px;
                                        border-radius: 6px; cursor: pointer; margin: 5px; width: 200px;
                                        font-size: 14px; font-weight: bold;
                                    ">ðŸš€ Save to WebXRide</button>
                                </div>
                                
                                <div style="margin: 20px 0;">
                                    <button id="export-json" style="
                                        background: #4CAF50; color: white; border: none; padding: 15px 25px;
                                        border-radius: 6px; cursor: pointer; margin: 5px; width: 200px;
                                        font-size: 14px; font-weight: bold;
                                    ">ðŸ“„ JSON Template</button>
                                    <div style="font-size: 12px; color: #ccc; margin-left: 5px;">
                                        Save configuration only (requires existing project files)
                                    </div>
                                </div>
                                
                                <div style="margin: 20px 0;">
                                    <button id="export-project" style="
                                        background: #2196F3; color: white; border: none; padding: 15px 25px;
                                        border-radius: 6px; cursor: pointer; margin: 5px; width: 200px;
                                        font-size: 14px; font-weight: bold;
                                    ">ðŸ“¦ Complete Project</button>
                                    <div style="font-size: 12px; color: #ccc; margin-left: 5px;">
                                        Save everything as standalone project folder
                                    </div>
                                </div>
                                
                                <button id="export-cancel" style="
                                    background: #666; color: white; border: none; padding: 10px 20px;
                                    border-radius: 4px; cursor: pointer; margin-top: 10px;
                                ">Cancel</button>
                            </div>
                        `;

                        document.body.appendChild(dialog);

                        // Add event listeners
                        const webxrideBtn = document.getElementById("export-webxride");
                        if (webxrideBtn) {
                            webxrideBtn.onclick = () => {
                                const templateName = document.getElementById("webxride-name").value.trim() || "360Â° Interactive Tour";
                                const templateDescription = document.getElementById("webxride-description").value.trim() || "Interactive 360Â° tour with hotspots";
                                
                                // Show collected data
                                const successMessage = `Template "${templateName}" successfully collected!\n\nDetails:\nâ€¢ ${templateDescription}\nâ€¢ 1 scenes\nâ€¢ 0 hotspots\nâ€¢ Type: 360Â° Interactive Tour`;
                                alert(successMessage);
                                
                                document.body.removeChild(dialog);
                                resolve("webxride");
                            };
                        }

                        document.getElementById("export-json").onclick = () => {
                            document.body.removeChild(dialog);
                            resolve("json");
                        };

                        document.getElementById("export-project").onclick = () => {
                            document.body.removeChild(dialog);
                            resolve("project");
                        };

                        document.getElementById("export-cancel").onclick = () => {
                            document.body.removeChild(dialog);
                            resolve(null);
                        };
                    });
                }
            };

            // Test the export modal
            mockEditor.showExportDialog().then((result) => {
                console.log('Export result:', result);
                if (result === 'webxride') {
                    console.log('WebXRide export selected - data would be sent to parent window');
                }
            });
        }
    </script>
</body>
</html> 