<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>360° Audio Tour</title>
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Loading overlay -->
  <div id="loading-overlay">
    <div class="loading-content">
      <div class="spinner"></div>
      <p>Loading 360° Tour...</p>
    </div>
  </div>

  <!-- Start overlay -->
  <div id="start-overlay" class="hidden">
    <div class="start-content">
      <h1>360° Audio Tour</h1>
      <p>Explore interactive panoramas with audio narration</p>
      <button id="start-button">Start Tour</button>
      <div class="instructions">
        <h3>How to use:</h3>
        <ul>
          <li>Look at the center hotspot or click it to go to the next photo</li>
          <li>Use play/pause buttons to control audio (gaze or click)</li>
          <li>Read the caption below the controls</li>
          <li>Drag to look around in each panorama</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Progress indicator -->
  <div id="progress-bar" class="hidden">
    <div class="progress-fill"></div>
    <span class="progress-text">Loading assets...</span>
  </div>

  <a-scene background="color: #ECECEC" vr-mode-ui="enabled: true">
    <!-- Assets -->
    <a-assets timeout="30000">
      <!-- Panoramas -->
      <img id="panorama1" src="https://hkfsgnludtapbbtsacwd.supabase.co/storage/v1/object/public/files/admin/images/2-4j4szc4198l-1751296134640.jpg" crossorigin="anonymous" />
      <img id="panorama2" src="https://hkfsgnludtapbbtsacwd.supabase.co/storage/v1/object/public/files/admin/images/3-4zwgm9vpjun-1751296136476.jpg" crossorigin="anonymous" />
      <img id="panorama3" src="https://hkfsgnludtapbbtsacwd.supabase.co/storage/v1/object/public/files/Dan%20Pacheco/images/day-e2my8z27cb-1751041979881.jpg" crossorigin="anonymous" />

      <!-- UI Elements -->
      <img id="hotspot-icon" src="https://hkfsgnludtapbbtsacwd.supabase.co/storage/v1/object/public/files/admin/images/hotspot-d8gha5vvyw5-1751296460070.png" />
      <img id="play-icon" src="https://hkfsgnludtapbbtsacwd.supabase.co/storage/v1/object/public/files/admin/images/play-flu7be3uruh-1751296461261.png" />
      <img id="pause-icon" src="https://hkfsgnludtapbbtsacwd.supabase.co/storage/v1/object/public/files/admin/images/pause-w55ev10c73j-1751296461027.png" />
      
      <!-- Audio tracks -->
      <audio id="audio1" src="https://hkfsgnludtapbbtsacwd.supabase.co/storage/v1/object/public/files/admin/audio/cars-dspssyjb3ng-1751296155055.mp3" preload="auto" crossorigin="anonymous"></audio>
      <audio id="audio2" src="https://hkfsgnludtapbbtsacwd.supabase.co/storage/v1/object/public/files/admin/audio/hi-hdr4vtma34r-1751296155723.mp3" preload="auto" crossorigin="anonymous"></audio>
      <audio id="audio3" src="https://www.soundjay.com/misc/sounds/bell-ringing-05.wav" preload="auto" crossorigin="anonymous"></audio>
    </a-assets>

    <!-- Centered Hotspot UI -->
    <a-entity id="hotspot-ui" position="0 1.6 -3">
      <!-- Centered Hotspot (gaze/click to go to next scene) -->
      <a-image
        id="hotspot"
        src="#hotspot-icon"
        class="clickable"
        position="0 0 0"
        scale="1 1 1"
        hotspot-gaze-nav
      ></a-image>

      <!-- Play Button (below hotspot) -->
      <a-image
        id="play-btn"
        src="#play-icon"
        class="clickable"
        position="-0.5 -0.7 0"
        scale="0.5 0.5 0.5"
        audio-control="action:play"
      ></a-image>

      <!-- Pause Button (below hotspot) -->
      <a-image
        id="pause-btn"
        src="#pause-icon"
        class="clickable"
        position="0.5 -0.7 0"
        scale="0.5 0.5 0.5"
        audio-control="action:pause"
      ></a-image>

      <!-- Caption (below buttons) -->
      <a-plane
        position="0 -1.3 0"
        width="2"
        height="0.5"
        color="#2196f3"
        opacity="0.8"
      >
        <a-text
          id="caption-text"
          value="Caption"
          align="center"
          color="white"
          width="1.8"
          position="0 0 0.01"
        ></a-text>
      </a-plane>
    </a-entity>

    <!-- The sky (panorama) -->
    <a-sky id="skybox" src="#panorama1"></a-sky>

    <!-- Camera with gaze/click cursor -->
    <a-entity id="camera" camera look-controls position="0 1.6 0">
      <a-entity 
        cursor="fuse: true; fuseTimeout: 1200"
        raycaster="objects: .clickable"
        position="0 0 -1"
        geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
        material="color: yellow; shader: flat"
      ></a-entity>
    </a-entity>
  </a-scene>

  <script src="script.js"></script>
</body>
</html>